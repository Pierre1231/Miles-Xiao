<style>
.grid-cols-14 {
  grid-template-columns: repeat(14, minmax(0, 1fr));
}
</style>

<footer class="w-full text-white" style="background:#2b2f36;">
  <div class="container mx-auto px-6 py-12">
    <div class="grid grid-cols-1 md:grid-cols-14 gap-10 items-start">
      <!-- Brand / Company -->
      <div class="md:col-span-4">
        <div>
          <img src="/media/logo-white.png" alt="Logo" class="h-18 w-auto mb-4">
          <p class="opacity-90 leading-6 text-sm">
            SMARTER Lighting<br>
            Premium lighting solutions
          </p>
        </div>
      </div>

      <!-- Indoor Light Products -->
      <div class="md:col-span-2 md:col-start-9">
        <h3 class="text-lg font-semibold mb-4">Indoor Light</h3>
        <ul class="space-y-2 text-xs opacity-90">
          <li><a href="/indoor-light/#Grid-Light" class="hover:opacity-100">Grid Light</a></li>
          <li><a href="/indoor-light/#Mini-Spot-Light" class="hover:opacity-100">Mini Spot Light</a></li>
          <li><a href="/indoor-light/#Recessed-Light" class="hover:opacity-100">Recessed Light</a></li>
          <li><a href="/indoor-light/#Surface-Mounted-Spot-Light" class="hover:opacity-100">Surface-Mounted Spot Light</a></li>
          <li><a href="/indoor-light/#Magnetic-Track-Light" class="hover:opacity-100">Magnetic Track Light</a></li>
        </ul>
      </div>

      <!-- Outdoor Light Products -->
      <div class="md:col-span-2 md:col-start-11">
        <h3 class="text-lg font-semibold mb-4">Outdoor Light</h3>
        <ul class="space-y-2 text-xs opacity-90">
          <li><a href="/outdoor-light/#Outdoor-Spot-Light" class="hover:opacity-100">Outdoor Spot Light</a></li>
          <li><a href="/outdoor-light/#Surface-Mounted-Light" class="hover:opacity-100">Surface-Mounted Light</a></li>
          <li><a href="/outdoor-light/#Wall-Light" class="hover:opacity-100">Wall Light</a></li>
          <li><a href="/outdoor-light/#Yard-Light" class="hover:opacity-100">Yard Light</a></li>
        </ul>
      </div>

      <!-- Contact Us -->
      <div class="md:col-span-3 md:col-start-13">
        <h3 class="text-lg font-semibold mb-4">Contact Us</h3>
        <ul class="space-y-2 text-xs opacity-90">
          <li>
            Phone: +86-13925362921
          </li>
          <li>
            E-mail: Miles@smartereck.com
          </li>
          <li>
            Address: Henglan Town, Zhongshan City, Guangdong
          </li>
          <li>
            Postal Code: 528478
          </li>
        </ul>
      </div>
    </div>

    <div class="mt-10 text-center text-xs opacity-80">
      {{- with site.Params.footer.copyright.notice -}}
      {{ replace . "{year}" (now | time.Format "2006") }}
      {{- end -}}
    </div>
  </div>
</footer>

<script>
  (function() {
    var section, bgDiv, ratio = null, rafId = null, lastWidth = 0, debTimer = null;

    function computeAndApply() {
      rafId = null;
      if (!section || !bgDiv || ratio == null) return;
      var width = section.clientWidth;
      if (Math.abs(width - lastWidth) < 1) return; // 宽度未变，跳过
      lastWidth = width;
      var desired = Math.round(width * ratio);
      var maxHeight = Math.min(width, Math.round(window.innerHeight * 0.9)); // 不超过1:1与90vh
      var minHeight = Math.round(window.innerHeight * 0.5); // 竖屏下限50vh
      var finalHeight = Math.min(Math.max(desired, minHeight), maxHeight);
      section.style.height = finalHeight + 'px';
      bgDiv.style.height = finalHeight + 'px';
    }

    function scheduleCompute() {
      if (rafId != null) return;
      rafId = requestAnimationFrame(computeAndApply);
    }

    function debouncedSchedule() {
      clearTimeout(debTimer);
      debTimer = setTimeout(scheduleCompute, 120);
    }

    function init() {
      section = document.querySelector('section.blox-hero');
      bgDiv = document.querySelector('section.blox-hero .home-section-bg.bg-image');
      if (!section || !bgDiv) return;
      var bg = getComputedStyle(bgDiv).backgroundImage;
      if (!bg || bg === 'none') return;
      var match = bg.match(/url\(["']?(.*?)["']?\)/);
      if (!match || !match[1]) return;
      var img = new Image();
      img.onload = function() {
        ratio = img.height / img.width; // 高宽比
        scheduleCompute();
      };
      img.src = match[1];

      // 使用 ResizeObserver 监听宽度变化（避免滚动时内高抖动触发多次）
      if ('ResizeObserver' in window) {
        var ro = new ResizeObserver(function(entries){ debouncedSchedule(); });
        ro.observe(section);
      }

      // 浏览器窗口变化：节流处理
      window.addEventListener('resize', debouncedSchedule, { passive: true });
      window.addEventListener('orientationchange', debouncedSchedule, { passive: true });
      if (window.visualViewport) {
        window.visualViewport.addEventListener('resize', debouncedSchedule, { passive: true });
      }
    }

    document.addEventListener('DOMContentLoaded', init);
  })();
</script>

